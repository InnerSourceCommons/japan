# Chapter 1. A Robust Approach to Team Collaboration

OS、クラウドコンピューティング、JavaScriptフレームワークなど、オープンソースソフトウェアの普及に刺激され、強力なオープンソースムーブメントの実践を真似て、_InnerSource_という名の社内コラボレーションを行う企業が続出しています。このページでは、インターネット商取引の大手PayPalの経験を読み、InnerSourceがエンジニア、経営者、マーケティング/PR部門にどのような利益をもたらすかを見ていきます。

InnerSourceのプロジェクト管理の魅力を理解するために、何がそんなに成功したオープンソースのソフトウェア開発を作っていることを考えてみましょう。

* プログラマは、自分の仕事を、マネージャやチームだけでなく、広い範囲の人々と共有します。ほとんどのオープンソースプロジェクトでは、世界中の誰もが自由にコードを閲覧し、コメントし、コードを調べて新しいスキルを学び、コードを改善したり自分のニーズに合わせてカスタマイズしたりできると思う変更を提出することができます。
* プロジェクトに基づく新しいコードリポジトリ（ブランチ）を自由に作成することができるので、コードの予期せぬ使い方をするサイトがコードを適応させることができる。異なるブランチを元のマスターブランチに再合成するためのルールや技術的なサポートが通常ある。
* 地理的に離れた場所にいる人が、別々の時間に、同じコードで作業したり、同じプロジェクトに異なるコードのファイルを提供することができます。
* コミュニケーションは、口コミで非公式に共有されるのではなく、文書化されて公開サイトに投稿される傾向があり、プロジェクトの歴史と新しいプロジェクトメンバーの学習の機会を提供します。
* ユニットテストを書くことがプログラミングの重要な仕事になる。ユニットテストとは、ある条件下で不正な入力を拒否したり、適切な分岐を行うなど、特定の孤立した動作をチェックする小さなテストのことです。オープンソースやInnerSourceでは、本番稼動時の不具合から守るために、変更がチェックインされるたびにテストが行われます。

InnerSourceは、単一の組織の見解とコントロールの範囲内にとどまることによって、古典的なオープンソースとは異なります。プロジェクトの "開放性 "は、組織内の多くのチームにまたがる。これにより、組織全体から提供される創造性と多様な視点の恩恵を受けながら、差別化された企業秘密を部外者に知られる心配なくコードに埋め込むことができます。

多くの場合、組織はInnerSourceプロジェクトの一部を一般に公開し、事実上オープンソースにすることを選択します。オープンソースの技術と管理手法が社内で使用されている場合、プロジェクトを公共の場に移すことは非常に容易になります。

InnerSource戦略を採用するメリットは以下の通りです。

* 組織横断的なコードの再利用が飛躍的に向上します。各チームのプログラマーは、他のチームが開発したモジュールのコードとアーキテクチャを理解し、コードを提供することができます。
* このようなチーム間のコラボレーションは、比較的摩擦の少ないものになります。貢献したコードを受け取ったチームが書き直すことはほとんどなく、上層部での議論も必要ない。
* プログラマーがユニットテスト、コードカバレッジ、継続的インテグレーションを使いこなし、開発の早い段階でバグを除去するようになるため、開発が速くなる。チームメンバー間で交わされるコメント文は、時間はかかるが、新人プログラマーのシステム習得を早め、元を取ることができる。
* プログラマーは、正式には（コード内のコメントや文書として）、非公式には（ディスカッションリストで）、自分のコードをより良く文書化することを学びます。ドキュメントはプロジェクトの歴史を提供し、外部の人間がそれを理解するのを助け、より多くの人がそれに貢献することができるようになります。

# Where Open Source Principles Work

InnerSourceはあなたの組織のために何を達成することができるかについて考える前に、これらの慣行の源 - フリー＆オープンソースソフトウェアの動きはうまく機能することが判明していると、それは歴史的にあまり成功している場所を検討することが重要です。

## Cross-Organizational Collaboration

オープンソースソフトウェアの開発は、チーム、企業、国の境界を越え、世界中の個人がLinuxやApacheのような主要なコンピュータの進歩に協力することを可能にします。Linuxのようなオープンソース・プロジェクトの中心的な貢献者は、今や大企業に勤めているのです。

重要なオープンソースプロジェクトの多くは、独立したプログラマーの発案で始まりましたが、大企業に採用されることがよくあります。また、PayPalをはじめ、そのような企業の中からオープンソースプロジェクトが生まれるケースもある。オープンソースの成功に欠かせないのは、どのような組織であっても、内部の人々が部外者にソフトウェアの開発、テスト、文書化、プロモーションの主要な役割をさせ、すべての貢献者に可能な限り公平な競争の場を提供することです。

## The Difference Between Geographically Dispersed Development and Agile Programming

オープンソースの国境を越えた活動は、アジャイルやスクラムのような一般的な企業の開発アプローチと強く対照的です。後者の開発手法は、一つのオフィスで顔を合わせて仕事をするチームのために設計されたものであることは明らかです。このようなプロジェクトでは、開発者は一緒に仕事をするだけでなく、ソフトウェアユーザーやその他の利害関係者と定期的に会わなければなりません。このような非公式な情報共有により、文書や正式な要件の必要性を減らすことができます。しかし、このような開発手法は、1つの作業現場よりも大きな環境では、あまりうまくいきません。

アジャイルやスクラムが拡張性という代償を払うとすれば、オープンソース開発はスピードという代償を払うことになります。オープンソースプロジェクトは、1つのオフィスで働く専門チームほど速く動くことができません。この代償は、締め切りの厳しい（時には狂おしいほど厳しい）スタートアップ・ベンチャーにとって、明らかに大きな違いとなる。この違いは、[“Value for Software Infrastructure”](#value-for-software-infrastructure)で説明するように、それぞれの開発モデルに適したソフトウェアの種類にも微妙な影響を及ぼします。

進行速度に制限があるにもかかわらず、多くのオープンソースプロジェクトは、厳しい納期を守り、予測可能なリリースを行っています。しかし、予測可能性を高めるために機能を犠牲にすることも少なくありません。特定のリリースで計画されている機能拡張の中には、期限を過ぎないようにするために延期しなければならないものもあるかもしれません。

実際、文献にはこの 2 つを組み合わせたチームが報告されています。<sup>[1](ch01.html#idm45896890983640)</sup> しかし、彼らの異なる要件と前提を理解することは、オープン ソースをよりよく理解することになります。

## 継続的なテストと開発
<!-- [用語] 貢献 or コントリビューション -->
大半のオープンソースプロジェクトでは、寄せられる貢献の一つ一つを厳しく客観的にテストする仕組みを設けています。これにより品質は保たれ、協力者間の信頼も醸成されます。例えば、ユニットテストや継続的インテグレーションといった標準的な技術が採用されており、それらの技術を正しく使うための規範も徹底されています。オープンソース開発者は品質管理をより科学的にしているのです。

<!-- [用語]リポジトリ or レポジトリ -->
オープンソースにおいてテスト駆動開発は求められないものの、ユニットテストは非常に重視されています。貢献対象のオープンソースプロジェクトにおける品質保証チームの有無にかかわらず、貢献者は自身の書いたコードを保証するためのユニットテストも合わせて書くことが求められます。コードを変更するにはテスト実行ツールと所定の手続きが必要であり、変更がリポジトリに取り込まれるためにはテスト結果が潔白であることが求められます。こうすることにより、変更されたコードが意図通りに動くことだけでなく、それ以外のコードに悪影響がないことも確かめられるのです。

コードカバレッジの測定や静的コード解析といった現代的な技術は、オープンソースの世界ではさほど見かけませんが、PayPalでは積極的に使われています。

<!-- [用語]信頼されたコミッター or トラステッドコミッター -->
まとめると、テストと継続的インテグレーションは2つの重要な役割を担っています。まずひとつは勿論のこと、プロダクトが壊れないようにすることです。ですが、それだけではなく、大きな責任を持つに相応しい開発者を見つけるのにも役立つのです。例えば、*信頼されたコミッター* という憧れの称号に相応しい開発者を見つけるには、受け入れられたコミットの数で判断することが通例です。*信頼されたコミッター* は、他の開発者の成果をレビューして採否を判定する役割を持ちます。また、自身はそうしたレビュープロセスを経ることなく変更する権限を持ちます。さらに、品質基準を満たさないコードを提出した伸び盛りの開発者を育てる役割も担います。

## 明文化の重要性

<!-- [訳注]原文ではdocumentationと書かれている。ここでの意味は文書にすることだけでなく、チャットやチケットのコメントも含む。よって明文化と表現した。 -->
さらなるオープンソースの信念は徹底的な明文化です。これは、関係者の地理的な位置とタイムゾーンが多様であることに起因しています。ユーザー向けドキュメントは多くのオープンソースプロジェクトで手薄になりがちなのですが(実はプロプライエタリプロジェクトでも同様に手薄です)、開発者の考える想定、意志決定、実装については積極的に記されます。

こうした実状は「包括的なドキュメントよりも動くソフトウェアを」優先する[アジャイルソフトウェア開発宣言](https://agilemanifesto.org/iso/ja/manifesto.html)とは対照的です。オープンソースコミュニティ(という開発者中心の世界)でも動くソフトウェアが正義とされるものの、実現できた事柄についてはドキュメントに残すことが依然として重視されています。これは一般的なアジャイルに対する特徴として覚えておくべきことです。

オープンソースソフトウェアにおける議論や状況説明といったあらゆるコミュニケーションは明文化されます。例えば、多くのプロジェクトでGitHubに書き込まれるコメントが開発を左右していることでしょう。メーリングリストは議論による意思決定に欠かせないツールとなっているでしょう。「メーリングリストに書かれていることだけが事実だ」という言い回しを聞いたことのある読者も多いのではないでしょうか。
<!-- [訳注] 2022年現在では Gitter や Slack といったツールがメーリングリストに代わって利用される場合も増えているでしょう。 -->

意思決定と実装の詳細を明文化することの価値として、新たに参加しようとする人々のためにプロジェクトの歴史を綴ることが挙げられます。時間をかけて経緯を読み解けば、プロジェクトの文化や学びのある経験を誰でも知ることができるのです。

そして、協働するには同じ言語を用いる必要があることにも注意が必要です。関わる人々が地理的にばらばらであるオープンソースプロジェクトでは、ご存知の通り英語が共通言語となっています(他の言語を用いる重要なプロジェクトもありますが)。読み書きの方が会話よりも民主的なコミュニケーションを促します。なぜなら外国語を流暢に話せるようになるよりも、書けるようになる方が簡単だからです。よって、多くの人々は、結束力は高いものの馴染みのない言語を使うチームよりも、オープンソースプロジェクトに参加できるのです。

## Value for Software Infrastructure

オペレーティングシステムやハイパーバイザー、プログラマーが使用するコンパイラやエディタなどのツール、セキュリティソフトウェア（オープンコードレビューにより弱点を発見できる）、その他エンドユーザーが目にしない場所に隠されているものなど、ソフトウェアスタックの低レイヤーではオープンソースソフトウェアは伝統的にうまく機能しています。

一方、ユーザーインターフェース（UI）は、オープンソースの開発に対して頑固なまでに抵抗があることが分かっています。オープンソースのエンドユーザーツールで、大量採用を達成したものを挙げるのは難しい。Mozilla Firefoxはその稀有な例です。

オープンソースとアジャイル開発の対比（["地理的に分散した開発とアジャイルプログラミングの違い"](#the-difference-between)）を振り返ると、この成功しない理由を知るヒントがある。アジャイルモデルが広く採用されているのは、プログラマーがユーザーと密接に連絡を取り合うからだ。開発者はユーザーのフィードバックを得て、数日のうちに作業を開始することができます。ほとんどのオープンソースプロジェクトは、アルファ版やベータ版のリリースなど、比較的古風な方法でエンドユーザーを巻き込んでいます。

ユニットテスト（["Continuous Testing and Development"](#continuous-testing) ）に重点を置いていることも、オープンソースがインフラに適していることの証左である。5年ほど前、アジャイルの専門家であるMike Cohn氏は、小さなユーザーインターフェイス層の下に様々なインフラの層を置く「テストピラミッド」を説明しました。彼は、ソフトウェアのできるだけ多くの層に対してユニットテストを義務付け、機能テストへの依存を減らした。

一方、UI層はユニットテストでのチェックが非常に難しく、その信頼性と価値は低下しています。そこで、システム全体の動作を確認し、エンドユーザが行う各アクションが望ましい結果を生むことを確認する機能テストが登場するのです。

このように、オープンソースの品質と信頼を支えるテストプロセスが、ユーザーインターフェースレベルでは弱いことが、オープンソースツールがこのレベルであまり普及しないもう一つの理由かもしれません。

## Finding the Right Level for Open Source

オープンソースやフリーソフトは、伝統的にプロプライエタリなソフトウェア（特にMicrosoft WindowsやOracleデータベース）と対比されてきた。現在、プロプライエタリな開発に対してより一般的なアプローチは、SaaS(Software as a Service)です。このソフトウェアデリバリーモデルでは、このセクションのガイドラインを使って、何をInnerSourceやオープンソースで開発し、何をアジャイルやその他のチーム指向の方法論を使ってよりクローズドな方法で行うべきかを判断することができます。

多くの企業がこれらのモデルを組み合わせています。このような企業は「[クローズドコア](http://radar.oreilly.com/2011/12/could-closed-core-prove-a-more.html)」と呼ばれます。なぜなら、ビジネスに不可欠なソフトウェアはSaaSの背後に置いておき、インフラストラクチャー・ソフトウェアを自由に共有するからです。このような配置は、より広いプログラミング・コミュニティに利益をもたらし、従業員の採用と訓練を容易にし、外部からの貢献という利益を彼らにもたらします。

# How PayPal Adopted InnerSource

PayPalがInnerSourceに辿り着くまでには、一連の歴史的かつ大規模な企業決定がありました。それはしばしばそうであるように、ツールや企業文化に意識的に行われたいくつかのシフトの一つとして、このモデルを採用しました。

PayPalの場合、InnerSourceの採用に先立つシフトは以下の通りです。

* より高速な開発を促進する技術の模索（例えば、多くのプロジェクトでJavaをJavaScriptやNode.jsに置き換えた）。
* その結果、新しく採用した技術に関連するオープンソースコミュニティや開発モデルをより深く理解することに興味を持ちました。
* 社内外でのコラボレーションにGitHubを使用するようになった。
* 品質に対する高い関心

PayPalは、InnerSourceモデルを試す前に、いくつかのオープンソース技術を採用し、自社のコードの一部もオープンソース化しました。他の企業は逆のルートを取るかもしれません。オープンソースのコードを作成する前に、自社内でオープンソースのツールや手法を試すかもしれませんが、このルートは一般的に困難だと考えられています。どちらの場合でも、オープンソースのツールや、オープンソース的なコラボレーションを促進するGitHubのようなサイトに精通していることが重要である。

PayPal のさまざまな変革は一緒に行われ、明らかに互いに影響を及ぼし合っているが、次のいくつかのセクションでは、それぞれの変革について個別に説明し、それぞれの特定の活動に焦点を当てることにする。

## Starting at the Edge

PayPalのInnerSourceは、米国外で働く地域セールスエンジニアから始まりました。彼らは、地域の利用者の好みに合わせてユーザー向けのコードを修正し、時には地域のプロモーションをサポートするために働いていました。これらのプログラマーは、必要なタイミングでコアチームから変更を受け入れてもらうことができませんでした。しばしば、こうした変更は、どこかの副社長が介入してマージするよう要求する必要があり、その後、袂を分かったコアエンジニアが、提出された変更をマージする前に書き直すということもありました。

その一方で、不十分なドキュメントは、異なるチームの開発者間で緊急に交わされるEメールのやり取りで補われていた。しかし、これらのメールには貴重な情報が含まれているにもかかわらず、ほとんどの開発者の目に触れることはなかった。そこで、多くの地域組織が独自にWikiに切り貼りする取り組みを始めた。

多くの地域のエンジニアがサンノゼの本社に飛んできて、1ヶ月間コアチームから直接学びましたが、信頼できるコミッターを育てるこの方法は、知識を十分に広めることができず、投資に見合うものではありませんでした。また、文書化されたドキュメントも作成されなかった。エンジニアが母国に帰った後、彼らは距離の問題から、書面による問い合わせでコアメンターシップを求めることを余儀なくされました。

最終的には、InnerSourceがより良い方法かもしれないことが提案されました。チームは InnerSource が本当にプロジェクトを効率化し、コア側の信頼できるコミッターはそのプロセスがはるかに優れていることに気づきました。リモートエンジニアは GitHub からコードサンプルをプルすることができました。

地域の共同作業者とうまく連携する方法を学ぶことに加えて、コアチームは、地域の貢献者の指導を通じて、モジュール性と理解しやすさを高めるためにコアコードのどこをリファクタリングすればよいかのヒントを得るようになりました。また、異なる地域で行われた作業のパターンに気づくことができたため、経験豊富な地域のエンジニアをメンターとして他の地域の仲間に登用することができました。

## A Speedier Development Process

PayPalは、比較的モノリシックなC++プラットフォームで人生をスタートしました。レガシーな要素はまだC++で残っていますが、一時期の新規開発は、Java Springを使ってよりモジュール化された方法で行われました。この移行後も、開発者のジェフ・ハレルが言うように、各製品には多くの「部族的知識」が埋め込まれていた。小さな変更であっても導入には数週間を要し、新入社員には6週間のトレーニング期間が必要だった。

3年前、PayPalはNode.jsを採用し、大きな変化を遂げました。PayPal の Node.js 開発者である Poornima Venkatakrishnan 氏によると、このプラットフォームはまずプロトタイピングのために使用され ました。その結果に満足した開発者は、それを本番環境に導入したいと考えました。まず、Java Spring プラットフォームと Node.js で同じ機能を並行して開発する実験を試みました。開発時間、コード行数、開発に必要なエンジニアの数などを基準に、両プラットフォームを比較したのです。Node.jsは明らかに勝者でした。

PayPal が Node.js を採用するという発表は、多くのプログラマ、特に C++ から Java への変更が長くて大変だったことを記憶しているプログラマを心配させました。しかし、PayPal は、Node.js への変更がまったく違うものであることを示しました。PayPal は、移行トレーニングにわずか 2 日間のスケジュールを組みました。Harrell 氏によると、参加者はすぐに、自分たちが新しく、活気があり、エキサイティングな世界に入ったことを実感したという。また、PayPalは、JavaScriptの分野のリーダーであるDouglas Crockford氏をトレーニングのスタッフとして迎えることができたことも幸運でした。(Crockfordは、非常に人気の高い書籍[JavaScript: The Good Parts](http://shop.oreilly.com/product/9780596517748.do)_の著者であり、オライリーの[JavaScript Master Classビデオ](http://shop.oreilly.com/product/9780596809614.do)の制作者でもあります)。

PayPalの新機能開発の多くはまだJavaを使用していますが、これらのチームは、Node.jsチームが開拓したInnerSourceのプラクティスを採用しています。 

## Engaging with Open Source

Node.jsに移行するためのトレーニングは、多くの教材がオンラインで利用できたことと、前回のJavaへの移行に比べてカスタマイズの必要性が少なかったことから、短時間で簡単に行うことができました。基本的には、2日間のトレーニングで、スタッフが自ら学習プロセスを継続できるように準備するのに十分だった。

ハレル氏によると、PayPalのプログラマーに、基本的な情報はPayPal社内のメーリングリストで上級プログラマーに尋ねるのではなく、StackOverflowなどのサイトで検索すればよい（あるいは単に検索エンジンを使えばよい）ことを伝えるのに時間がかかったそうです。しかし、やがて情報への問い合わせは、オープンソースコミュニティへの全面的な関与へと広がっていきました。

多くの企業は、オープンソースの技術を採用することで、単に高品質で無料であることに魅力を感じ、その技術を生み出すコミュニティへの継続的な参加につながることに気づきます。

これは、PayPalがNode.jsを採用したときに起こったことです。今では、Node.jsはかなり成熟した技術になっています。Node.jsはピークを過ぎ、JavaScriptプログラマは代替品を探していると指摘するコメンテータもいるほどです。(後述するように、オープンソース技術の変化のスピードは、どの技術を採用するかの意思決定を変化させます)。しかし、PayPalは、Node.jsコミュニティのために有用なツールを開発する余地が十分にある、初期の段階で参入してきました。PayPal は、Node.js 財団と ECMAScript Technical Committee 39 の非常にアクティブなメンバになりました。

プログラマの自己啓発と新入社員の即時生産性という2つの目標を促進するために、PayPalはJavaScriptとNode.jsへの移行時に他の人気のあるオープンソースツールを積極的に導入しました。例えば、テストにはSelenium、継続的インテグレーションにはJenkins、JavaのテストにはTestNG、JUnit、Mockitoといったツールが広く使われている。その過程で、PayPalは、[Nemo](https://github.com/paypal/nemo) (元々はMatt Edelmanが書いた)、 [SeLion](http://selion.io) および [Illuminator](https://github.com/paypal/Illuminator) など、オープンソースのコンポーネントと互換性のある多くのツールを開発しオープンソースを提供しました。

PayPal は Node.js を開発初期に採用し、特定のツールが不足していたため、同社は Node.js アーキテクチャを制御するフレームワークである [Kraken] (http://krakenjs.com/) を開発しました。Harrellによると、チームは、Harrellが他のPayPalのコードで見た「部族的」知識から解放され、一般的な価値があることを確認するために、フレームワークをオープンソースとして開発することに決めたそうです。Krakenは、おそらく彼らの最も成功したオープンソースプロジェクトになりました。

Venkatakrishnanは、この時PayPalに入ったオープンソースの実践を次のように挙げている。

* 高い品質基準を設定すること。コードをコミットする前に、コードカバレッジテストを少なくとも90%以上実行しなければならない。誰かがコミットを送ると、それが自動的な再構築の引き金となり、マージするのに十分な品質であることが確認されます。
* リポジトリにあるすべてのコードに対して、ドキュメントを要求すること。
* すべてのディスカッションをGitHub上で行い、コラボレーションを可能にし、チーム外の人からのインプットを促進する。社内プロジェクト用のプライベートなGitHubリポジトリと、オープンソースのコード用のパブリックなGitHubリポジトリがあります。
* 誰もがイノベーションを起こせると感じられるようにすること。
* すべての専門知識が1つのチームから得られる必要はないことをエンジニアに教えること。オープンソースソフトウェアでは、世界中のどこからでも助けを得ることができるのです。また、公開されているオープンソースプロジェクトに貢献することで、会社の知名度が上がり、コミュニティに対するコミットメントを示すことができます。
* チーム内で行われた仕事に対する誇りを育み、カンファレンスでそれについて話したり、PayPalのエンジニアリングブログに書いたりするよう奨励する。

ハレルは、ソフトウェアスタックの上位に行けば行くほど、技術の変動が激しいと指摘する。ソフトウェア開発における変化は、特にオープンソース技術では継続的である。そこでPayPalは、チームが常に自分たちの技術を評価することを推奨している。各開発者には継続的な学習が期待される。

必然的に、代替ツールの評価は、チームごとにツールの多様性をもたらす。開発者のマット・エデルマンは、この現象はオープンソースに特によく見られると指摘しています。なぜなら、開発者はUnixの家長であるケン・トンプソンが提案した、「多くの小さなプログラムが一緒に動く」という線に沿ってツールを開発するのが好きだからです。

そのため、ReactやAngularなど、さまざまな最先端技術が使用されています。プログラマーは、ツールを推奨する前にトイプロジェクトで試し、選択肢を慎重に比較した上で選択することが期待されています。

オープンソースのアーキテクチャは、機能を拡張する技術の代替実装を可能にするプラグインを備えていることがよくあります。Edelmanによると、PayPalはKrakenのプラグインの一部を内部で（InnerSourceモデルを通じて）開発し、その他をオープンソースとして開発しているそうです。

## GitHub Collaboration

現代のコード開発において、唯一無二の重要な位置を占める企業がある。それはGitHubです。もともとはバージョン管理ソフトウェアGitを使う開発者の生活を楽にするためのSaaSプラットフォームでしたが、GitHubは開発者が必要不可欠と感じるツールを備えた洗練されたコラボレーションプラットフォームへと進化しました。このトピックに関する2つのリソースは、書籍_[Git for Teams](http://shop.oreilly.com/product/0636920034520.do)_ と [Collaborating with Git video](http://shop.oreilly.com/product/0636920034872.do)です。

KrakenのようなオープンソースプロジェクトのコードをGitHubに置くだけでなく、PayPalは社内にGitHub Enterpriseリポジトリを設置し、社内のプログラマーがGitHubのパブリックユーザーとまったく同じように共同作業ができるようにしています。コードレビュー、コミット、テストはオープンソースと同じように行われますが、内部リポジトリ上で行われます。最も重要なことは、各チームがチーム外のPayPalプログラマーから新しいコードを受け入れることに慣れることです。

Edelman氏によると、GitHubとInnerSourceに移行する前、PayPalのプログラマーは、他のチームの仕事に対して小さなバグ修正だけを提供することに能力を感じていた。もし彼らがより大きなコードを提供した場合、そのコードを受け取ったチームはそれを精査し、ゼロからコードを作成する利点がほとんどないほど多くの書き換えを行うことがよくあります。チーム間でコードの受け入れについて交渉するために、高いレベルの管理者が関与しなければならないこともしばしばでした。

しかし、最近では、実質的な新機能を書き換えることなく、チェックインできるようになりました。その理由の1つは、ドキュメンテーションに新たに注目したことだ。エーデルマン氏は、インナーソースのプロジェクトは、システムを深く理解する少数の特権的なプログラマーだけでなく、より広いプログラミングの基盤の上に成り立っていなければならないと強調する。誰でも、プロジェクトを研究し、大きな変更を提案することができる。

また、ドキュメント（コードとGitHubのコメントの両方）のおかげで、開発者はアーキテクチャ変更の必要性を認識するようになります。なぜそれが複雑で直感的でないのかを、いろいろな人に4回も説明しなければならないとしたら、それを変えようと考えるようになるのです。

また、プログラマーが国を超えて力を発揮することで、知的な成長、仕事のやりがいを感じるようになります。プログラマーは、コードの設計についてより包括的に考えるようになり、同時にコードレビュー、テスト、ドキュメントの書き方などの新しいスキルを身につけることができる。エデルマン氏は、InnerSourceは "全員のゲームを向上させる "と言う。

Edelman氏は、コアインフラストラクチャモジュールで見つかった、あるセキュリティ関連のバグについて言及している。ある機能が、仕様書（RFC）に正確に沿っていなかったのです。当初は、インフラ・チームの外部の人間が修正するよう圧力をかけ、多くの電子メールが交わされました。しかし、ある部外者（セキュリティは専門外）がRFCを見て、自分でも修正できることに気づいた。そして、その修正案を提出したところ、コア・インフラ・チームがすぐにそれをマージしてくれたのです」。この逸話は、プログラマーが自発的に行動することの重要性と、きちんと文書化された標準に従うことの価値という、2つの原則を示している。

## Quality Improvement

PayPalは、プラットフォームの大部分をNode.jsに移行し、オープンソースを採用すると同時に、品質向上への取り組みを開始しました。品質保証のリーダーであるDoug Simmonsによると、PayPalのこの目標に向けたステップは以下の通りです。

* より多くのユニットテスト
* 継続的な統合
* コードレビュー
* より多くのコードカバレッジレポート
* 静的解析

すべての会話が公の場で行われる必要はありませんが、GitHub のコメントプロセスはいくつかの点で品質を向上させています。信頼できるコミッターは、自分のコードをリポジトリに受け入れたいと願っている新人プログラマーのメンターとして効果的に機能します。投稿者と信頼できるコミッターの間で交わされるコメントのやりとりは、投稿者にとっても他のプログラマーにとっても、そのやりとりを見て学ぶことができる教育的なものです。

## Culture Change

InnerSourceを採用するような重要な企業の動きは、従業員の恐怖と期待を扱う上で繊細さを求めています。PayPalは、移行を支援するためにオープンソース開発の外部専門家を雇いました。

多くの企業のオブザーバーは、最も重要な文化的変化は、従業員が他のチームにコードを貢献する自信を与えることであることに同意しているようです。しかし、Edelman氏が指摘するように、社員はバグについて不平を言う習慣から、自ら進んで修正する習慣に変わらなければならない。

ハレルは、チーム外のPayPalプログラマーに貢献させるよう、チームメンバーを説得したことを思い出す。しかし，チームメンバーは，外部のコードを吟味することにばかり時間を取られ，自分たちのコードを書けなくなるのではないかと，よく反論していました．また、別の企業では、プログラマーが、新たな貢献によって将来のメンテナンスにかかる負担を心配していました。<sup>[2](ch01.html#idm45896890913528)</sup><sup>,</sup> <sup>[3](ch01.html#idm45896890901048)</sup>

しかし、このような欠点は、思ったほど恐れるに足りないものであった。というのも、厳格なテストとビルドのプロセスによって、コントリビューションの品質が確保されていたからだ。そして、その貢献が、チームが生み出すコードの価値を高めている。

Edelman氏は、"モジュールの作者は、品質と一貫性の基準を実施しながら、コミュニティからのフィードバックや変更にオープンであることによって、ソフトウェアをキュレーションすることが期待される "と書いている。彼によると、開発者は、テストを書いたり、コードレビューをしたりするためのタスクに文句を言っていたのが、それらを主張するように進化したのだという。

品質面では、プログラマーがInnerSourceのバグレポートを提出すると、まずそのモジュールの担当者に送られます。このプログラマは、その後、影響を受けるコードの元の貢献者にそれらを渡すことができます。

モジュラーアーキテクチャと明確に定義されたAPIは、多くのプログラミングチームがチーム外からの貢献を促進するために重要であると認識しています。

InnerSourceの開発プラクティスは、基本的に最も一般的なオープンソースプラクティスであるため、社内で開発されたプロジェクトをオープンソース化することは非常に簡単です。技術的には、チームがしなければならないのは、コードを公開リポジトリに移動し、社内の他のメンバーからのそのような入力に対処してきたように、外部のバグレポートやコードの貢献に対処し始めることだけです。

しかし、いくつかの法律の壁が立ちはだかるかもしれない。プログラマーが外部のコードをプロジェクトに組み込んだ場合、法務部門は、彼らがコードを開く権利を持っていること、そして彼らのライセンスが組み込んだコードのライセンスと互換性があることを確認するために、すべてのライセンスを調査する必要があります。また、ブランディングの審査も行われることがあります。PayPalでは、法務チームがオープンソースの専門家と相談し、必要なステップを踏むためのWebベースのプロセスを開発しました。

現代のプログラマーは、変化に対応することを学ぶ。新しい技術やツールもさることながら、文化を変えることで、機敏さを保ち、スキルを最新に保つことができるのです。InnerSourceは、これらすべての成果への一歩となるのです。

<sup>[1](ch01.html#idm45896890983640-marker)</sup> Stol, KJ, P. Avgeriou et al. [“Key Factors for Adopting Inner Source.”](http://www.brian-fitzgerald.com/wp-content/uploads/2014/05/TOSEM-2014-stol.pdf) _ACM Transactions on Software Engineering Methodology (TOSEM)_ (2014): Vol 23, No 2.

<sup>[2](ch01.html#idm45896890913528-marker)</sup> Ibid.

<sup>[3](ch01.html#idm45896890901048-marker)</sup> Stol, KJ, AB Muhammad, et al. [“A comparative study of challenges in integrating Open Source Software and Inner Source Software.”](http://www.cs.rug.nl/paris/papers/IST11.pdf) _Information and Software Technology_ 53 (2011): 1319–1336\.

# About the Author

**Andy Oram** は、オライリー・メディアの編集者です。1992年から同社の社員で、現在はオープンソース技術とソフトウェアエンジニアリングを専門としています。オライリーでは、2001年に米国出版社から初めて発売されたLinuxに関する書籍_Peer-to-Peer_や、2007年のベストセラー_Beautiful Code_などを手がけています。
